<!DOCTYPE html>
<html>
<head>
  <title>Live Sheet Dashboard</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      padding: 5px;
    }
    #login, #protected {
      margin: 20px;
    }
  </style>
</head>
<body>

<div id="login">
  <h2>Client Login</h2>
  <input type="text" id="username" placeholder="Username" />
  <input type="password" id="password" placeholder="Password" />
  <button onclick="checkLogin()">Login</button>
  <p id="login-error" style="color:red;"></p>
</div>

<div id="protected" style="display:none;">
  <h2>Live Google Sheet Data</h2>
  <div id="data">Loading...</div>
</div>

<script>
  const USERS = {
    "client1": "pass123",
    "client2": "demo456"
  };

  const sheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR1a3OFd1Xh5WebntRT3Y8kUX7H8TtkwlzoWqF8W4trBr5Rkd3rADcJZDOI6c0w9mAgvplBHlhOfZR1/pubhtml?gid=1688289524&single=true';

  function checkLogin() {
    const user = document.getElementById("username").value;
    const pass = document.getElementById("password").value;
    if (USERS[user] === pass) {
      document.getElementById("login").style.display = "none";
      document.getElementById("protected").style.display = "block";
      fetchSheet();
      setInterval(fetchSheet, 60000); // refresh every 1 min
    } else {
      document.getElementById("login-error").innerText = "Invalid login";
    }
  }

  function fetchSheet() {
    fetch(sheetURL)
      .then(res => res.text())
      .then(data => {
        const rows = data.trim().split('\n');
        let html = '<table>';
        rows.forEach(row => {
          html += '<tr>';
          row.split(',').forEach(cell => {
            html += `<td>${cell}</td>`;
          });
          html += '</tr>';
        });
        html += '</table>';
        document.getElementById('data').innerHTML = html;
      });
  }
</script>

</body>
</html>
